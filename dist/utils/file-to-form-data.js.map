{"version":3,"file":"file-to-form-data.js","sources":["../../src/utils/file-to-form-data.ts"],"sourcesContent":["export interface Relation {\n  ressourceName: string;\n  fieldName: string;\n  id: string;\n}\n\nexport default function fileToFormData(file: File, relations: Relation[]) {\n  const formDataHelper = new FormDataHelper(file);\n  formDataHelper.appendRelations(relations);\n  return formDataHelper.formData;\n}\n\nexport class FormDataHelper {\n  public declare formData: FormData;\n  private relationObject: Record<string, unknown> = {};\n  constructor(file: File) {\n    this.formData = new FormData();\n    this.formData.append('file', file);\n  }\n\n  public appendRelations(relations: Relation[]) {\n    for (const relation of relations) {\n      this.appendRelation(relation);\n    }\n    this.buildRelations();\n  }\n\n  public addFileId(id: string) {\n    this.formData.append('id', id);\n  }\n  public buildRelations() {\n    const dataObject = {\n      attributes: {},\n      relationships: this.relationObject,\n    };\n    this.formData.append('data', JSON.stringify(dataObject));\n  }\n\n  private appendRelation(relation: Relation) {\n    this.relationObject[relation.fieldName] = {\n      data: {\n        type: relation.ressourceName,\n        id: relation.id,\n      },\n    };\n  }\n}\n"],"names":["fileToFormData","file","relations","formDataHelper","FormDataHelper","appendRelations","formData","constructor","_defineProperty","FormData","append","relation","appendRelation","buildRelations","addFileId","id","dataObject","attributes","relationships","relationObject","JSON","stringify","fieldName","data","type","ressourceName"],"mappings":";;AAMe,SAASA,cAAcA,CAACC,IAAU,EAAEC,SAAqB,EAAE;AACxE,EAAA,MAAMC,cAAc,GAAG,IAAIC,cAAc,CAACH,IAAI,CAAC,CAAA;AAC/CE,EAAAA,cAAc,CAACE,eAAe,CAACH,SAAS,CAAC,CAAA;EACzC,OAAOC,cAAc,CAACG,QAAQ,CAAA;AAChC,CAAA;AAEO,MAAMF,cAAc,CAAC;EAG1BG,WAAWA,CAACN,IAAU,EAAE;IAAAO,eAAA,CAAA,IAAA,EAAA,gBAAA,EAD0B,EAAE,CAAA,CAAA;AAElD,IAAA,IAAI,CAACF,QAAQ,GAAG,IAAIG,QAAQ,EAAE,CAAA;IAC9B,IAAI,CAACH,QAAQ,CAACI,MAAM,CAAC,MAAM,EAAET,IAAI,CAAC,CAAA;AACpC,GAAA;EAEOI,eAAeA,CAACH,SAAqB,EAAE;AAC5C,IAAA,KAAK,MAAMS,QAAQ,IAAIT,SAAS,EAAE;AAChC,MAAA,IAAI,CAACU,cAAc,CAACD,QAAQ,CAAC,CAAA;AAC/B,KAAA;IACA,IAAI,CAACE,cAAc,EAAE,CAAA;AACvB,GAAA;EAEOC,SAASA,CAACC,EAAU,EAAE;IAC3B,IAAI,CAACT,QAAQ,CAACI,MAAM,CAAC,IAAI,EAAEK,EAAE,CAAC,CAAA;AAChC,GAAA;AACOF,EAAAA,cAAcA,GAAG;AACtB,IAAA,MAAMG,UAAU,GAAG;MACjBC,UAAU,EAAE,EAAE;MACdC,aAAa,EAAE,IAAI,CAACC,cAAAA;KACrB,CAAA;AACD,IAAA,IAAI,CAACb,QAAQ,CAACI,MAAM,CAAC,MAAM,EAAEU,IAAI,CAACC,SAAS,CAACL,UAAU,CAAC,CAAC,CAAA;AAC1D,GAAA;EAEQJ,cAAcA,CAACD,QAAkB,EAAE;AACzC,IAAA,IAAI,CAACQ,cAAc,CAACR,QAAQ,CAACW,SAAS,CAAC,GAAG;AACxCC,MAAAA,IAAI,EAAE;QACJC,IAAI,EAAEb,QAAQ,CAACc,aAAa;QAC5BV,EAAE,EAAEJ,QAAQ,CAACI,EAAAA;AACf,OAAA;KACD,CAAA;AACH,GAAA;AACF;;;;"}